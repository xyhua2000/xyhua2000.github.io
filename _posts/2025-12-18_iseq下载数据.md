---
layout: post
title: "从ENA、SRA下载数据"
date:   2025-12-18
tags: [iseq]
comments: true
author: xyhua
---

使用iseq下载数据

<!-- more -->

## 创建并激活环境
```
mamba create -n iseq iseq
mamba activate iseq
```

## 下载文件
```
iseq -i acc_ids.txt -g -a -t 18 -p 10 -d ena -o data
# -g 自动提取fastq并压缩，使用线程-t 18
# 下载时，使用-p 10线程
# 从-d ena下载数据
# 输出到 -o data文件夹
# -i 支持accession or a file containing multiple accessions
```

## 一些输出
```
(iseq) [username]$ iseq -i acc_ids.txt -g -a -t 18 -p 10 -d ena -o data
Note: -a and -p options were used at the same time, -a will be used first
      SRR8639145_1.fastq.gz 34.40G             SRR8639145_2.fastq.gz 35.38G      
Note: Above Run will be downloaded. You can see the details in SRR8639145.metadata.tsv
Note: -g used, download FASTQ files in gzip format directly
File size: 34.40G       Database: ENA   Mode: Aspera
SRR8639145_1.fastq.gz                                                           7% 2700MB           2:37:06 ETA
```

## iseq帮助文档
```
iseq -h

Description:
  Download sequencing data and matadata for each Run from [GSA, SRA, ENA or DDBJ] databases.

Usage:
  iseq -i accession [options]

Accepted accession formats:
    1.    Projects: PRJEB, PRJNA, PRJDB, PRJC, GSE
    2.     Studies: ERP, DRP, SRP, CRA
    3.  BioSamples: SAMD, SAME, SAMN, SAMC
    4.     Samples: ERS, DRS, SRS, GSM
    5. Experiments: ERX, DRX, SRX, CRX
    6.        Runs: ERR, DRR, SRR, CRR

Required option:
  -i, --input     [text|file]   Single accession or a file containing multiple accessions.
                                Note: Only one accession per line in the file.

Optional options:
  -m, --metadata                Skip the sequencing data downloads and only fetch the metadata for the accession.
  -g, --gzip                    Download FASTQ files in gzip format directly (*.fastq.gz).
                                Note: if *.fastq.gz files are not available, SRA files will be downloaded and converted to *.fastq.gz files.
  -q, --fastq                   Convert SRA files to FASTQ format.
  -t, --threads   int           The number of threads to use for converting SRA to FASTQ files or compressing FASTQ files (default: 8).
  -e, --merge     [ex|sa|st]    Merge multiple fastq files into one fastq file for each Experiment, Sample or Study.
                                ex: merge all fastq files of the same Experiment into one fastq file. Accession format: ERX, DRX, SRX, CRX.
                                sa: merge all fastq files of the same Sample into one fastq file. Accession format: ERS, DRS, SRS, SAMC, GSM.
                                st: merge all fastq files of the same Study into one fastq file. Accession format: ERP, DRP, SRP, CRA.
  -d, --database  [ena|sra]     Specify the database to download SRA sequencing data (default: ena).
                                Note: new SRA files may not be available in the ENA database, even if you specify "ena".
  -p, --parallel  int           Download sequencing data in parallel, the number of connections needs to be specified, such as -p 10.
                                Note: breakpoint continuation cannot be shared between different numbers of connections.
  -a, --aspera                  Use Aspera to download sequencing data, only support GSA/ENA database.
  -s, --speed     int           Download speed limit (MB/s) (default: 1000 MB/s).
  -k, --skip-md5                Skip the md5 check for the downloaded files.
  -r, --protocol  [ftp|https]   Specify the protocol only when downloading files from ENA (default: ftp).
  -Q, --quiet                   Suppress download progress bars.
  -o, --output    text          The output directory. If not exists, it will be created (default: current directory).
  -h, --help                    Show the help information.
  -v, --version                 Show the script version.

See example:
    https://github.com/BioOmics/iSeq/blob/main/docs/Examples.md

More information:
    https://github.com/BioOmics/iSeq
```

